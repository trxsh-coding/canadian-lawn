stages:
  - build

build_ui_kit:
  stage: build
  image: node:22

  cache:
    key: yarn-4-cache
    paths:
      - .yarn/cache
      - .yarn/unplugged
      - .yarn/install-state.gz
      - .yarn/build-state.yml
      - node_modules/

  before_script:
    - corepack enable
    - yarn install
    - yarn workspaces focus @canadian-lawn/ui-kit

  script:
    - yarn build:ui
    - echo "üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ dist/"
    - ls -la packages/ui-kit/dist || echo "‚ùå dist –Ω–µ –Ω–∞–π–¥–µ–Ω"

  rules:
    - if: $CI_PIPELINE_SOURCE == "push"
